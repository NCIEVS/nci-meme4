<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
   
  
  
  
  
  
  
  <meta http-equiv="Content-Type" content="text/html; charset=utf8">
  <title>MEME - Applications - Regular Processes</title>
</head><body style="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255);" alink="#ff0000" link="#3333ff" vlink="#999999">

<center><h2>Maintenance and Support Processes<br>
</h2></center>







<hr width="100%">
<p align="center">[ <a href="#overview">overview</a> | <a href="#details">details</a> | <a href="#references">references</a> ]</p>







<div align="center"><center><img src="/images/code.gif" title="" alt="code" style="width: 167px; height: 201px;"><br>
</center></div>










<blockquote>
  <h3><a name="overview"></a> Overview/Objective</h3>
  <p>This
document describes recommended processes that should be run on a
regular or semi-regular basis to ensure proper functioning of the MEME
system.&nbsp; Some processes perform regular content maintenance tasks,
others perform performance related DBA tasks.&nbsp; These are generally
things that should be automated via cron or some other simliar such
mechanism (e.g. oracle advance queueing).<br>&nbsp;</p>
  <h3><a name="details"></a> Details</h3>In this section, we cover these topics:r<br>
  <ol>
    <li><a href="#recur">List of recurring maintenance processes</a></li>
    <li><a href="#verify">URL response testing to verify servers running</a></li>
    <li><a href="#config">Configuring processes that send email</a><br>
    </li>
  </ol>
  <br>
  <span style="font-weight: bold;"><a name="recur"></a>Recurring Processes<br>
  <br>
  </span>This
section lists the important processes, wherey live, how often they run,
and so on.&nbsp; It is broken down by "role".&nbsp; The roles are<br>
  <ul>
    <li>Administrator (MEME)</li>
    <li>Administrator (System/DB)<br>
    </li>
    <li>Documenter</li>
    <li>Editing Manager<br>
    </li>
    <li>Maintainer</li>
    <li>QA Administrator<br>
    </li>
  </ul>
  <span style="font-weight: bold;">Administrator</span><span style="font-weight: bold;"> (MEME)</span><br>
&nbsp;<br>
  <table style="text-align: left; width: 100%;" border="1" cellpadding="2" cellspacing="2">
    <tbody>
      <tr>
        <th style="vertical-align: top; text-align: center; background-color: rgb(255, 255, 204);">Script/Process<br>
        </th>
        <th style="vertical-align: top; text-align: center; background-color: rgb(255, 255, 204);">Location<br>
        </th>
        <th style="vertical-align: top; text-align: center; background-color: rgb(255, 255, 204);">Frequency<br>
        </th>
        <th style="vertical-align: top; text-align: center; background-color: rgb(255, 255, 204);">Comments<br>
        </th>
      </tr>
      
      
      
      
      <tr>
<td style="vertical-align: top;">LVGServer.pl<br>
</td>
<td style="vertical-align: top;">/site/package/lvg/hsqldbserver<br>
</td>
<td style="vertical-align: top;">STARTUP<br>
</td>
<td style="vertical-align: top;">Starts LVG server<br>
</td></tr>
      
      <tr>

      </tr>
      
      <tr>
<td style="vertical-align: top;">meme_server.sh<br>
</td>
<td style="vertical-align: top;">$MEME_HOME/bin<br>
</td>
<td style="vertical-align: top;">STARTUP, DAILY, AUTO<br>
</td>
<td style="vertical-align: top;">Starts MEME server<br>
</td></tr>
      <tr>
<td style="vertical-align: top;">mrd_server.sh<br>
</td>
<td style="vertical-align: top;">$MEME_HOME/bin<br>
</td>
<td style="vertical-align: top;">STARTUP<br>
</td>
<td style="vertical-align: top;">Starts MRD server<br>
</td></tr>
      <tr>
<td style="vertical-align: top;">meme_packages.sql<br>
</td>
<td style="vertical-align: top;">$MEME_HOME/etc/sql</td>
<td style="vertical-align: top;">JUST BEFORE MEME SERVER STARTUP<br>
</td>
<td style="vertical-align: top;">Ensures current PL/SQL is always loaded.<br>
</td></tr>

      
      
      
      
      
    </tbody>
  </table>
  <span style="font-weight: bold;"><br>
  </span><span style="font-weight: bold;">Administrator</span><span style="font-weight: bold;"> (System/DB)</span><br>

&nbsp;<br>

  
  <table style="text-align: left; width: 100%;" border="1" cellpadding="2" cellspacing="2">

    <tbody>
      <tr>
        <th style="vertical-align: top; text-align: center; background-color: rgb(255, 255, 204);">Script/Process<br>
        </th>
        <th style="vertical-align: top; text-align: center; background-color: rgb(255, 255, 204);">Location<br>
        </th>
        <th style="vertical-align: top; text-align: center; background-color: rgb(255, 255, 204);">Frequency<br>
        </th>
        <th style="vertical-align: top; text-align: center; background-color: rgb(255, 255, 204);">Comments<br>
        </th>
      </tr>
      
      
      
      
      <tr>
<td style="vertical-align: top;">Edit Startup Configuration<br>
</td>
<td style="vertical-align: top;">N/A<br>
</td>
<td style="vertical-align: top;">AS NEEDED<br>
MANUAL<br>
</td>
<td style="vertical-align: top;">The startup configuration may need to be changed periodically to accommodate changes<br>
</td></tr>
      
      <tr>

      </tr>
      
      <tr>
<td style="vertical-align: top;">Install Software<br>
</td>
<td style="vertical-align: top;">N/A<br>
</td>
<td style="vertical-align: top;">AS NEEDED<br>
MANUAL<br>
</td><td style="vertical-align: top;">Versions of Apache, Tomcat, MD5, and Perl need to be maintained over time<br>
</td></tr><tr><td style="vertical-align: top;">Upgrade Oracle<br>
</td>
<td style="vertical-align: top;">$MEME_HOME/bin<br>
</td>
<td style="vertical-align: top;">AS NEEDED<br>
MANUAL<br>
</td>
<td style="vertical-align: top;">As Oracle versions change and we are ready to upgrade, we will have to migrate to later releases.<br>
</td></tr><tr>
        <td style="vertical-align: top;">Rebuild Indexes<br>
        </td>
        <td style="vertical-align: top;">$MEME_HOME/bin/reindex_mid.pl<br>
        </td>
        <td style="vertical-align: top;">WEEKLY<br>
AUTO<br>
        </td>
        <td style="vertical-align: top;">Rebuilds indexes on MID owned tables.<br>
        </td>
      </tr>
<tr><td style="vertical-align: top;">Recover Database<br>
</td>
<td style="vertical-align: top;">$ORACLE_HOME/*</td>
<td style="vertical-align: top;">AS NEEDED<br>
MANUAL<br>
</td>
<td style="vertical-align: top;">If DB suffers serious problems, it will have to be recovered back to a known good state.<br>
</td></tr>
      <tr>
<td style="vertical-align: top;">Refresh DB<br>
</td>
<td style="vertical-align: top;">No Script, use Oracle tools for imp/exp, transport tablespaces<br>
</td>
<td style="vertical-align: top;">BI-WEEKLY?<br>
MANUAL<br>
</td>
<td style="vertical-align: top;">Refresh test MID from the editing MID for test insertions.<br>
</td></tr><tr>
        <td style="vertical-align: top;">Refresh Statistics<br>
        </td>
        <td style="vertical-align: top;">$MEME_HOME/etc/sql/stale_stats.sql<br>
        </td>
        <td style="vertical-align: top;">DAILY<br>
AUTO<br>
        </td>
        <td style="vertical-align: top;">Refreshes stale statistics.<br>
        </td>
      </tr>

      
      
      
      
    </tbody>
  
  </table>

  <span style="font-weight: bold;"><br>
  </span><span style="font-weight: bold;">Documenter<br>

  </span>&nbsp;<br>

  
  <table style="text-align: left; width: 100%;" border="1" cellpadding="2" cellspacing="2">

    <tbody>
      <tr>
        <th style="vertical-align: top; text-align: center; background-color: rgb(255, 255, 204);">Script/Process<br>
        </th>
        <th style="vertical-align: top; text-align: center; background-color: rgb(255, 255, 204);">Location<br>
        </th>
        <th style="vertical-align: top; text-align: center; background-color: rgb(255, 255, 204);">Frequency<br>
        </th>
        <th style="vertical-align: top; text-align: center; background-color: rgb(255, 255, 204);">Comments<br>
        </th>
      </tr>
      
      
      
      
      
      
      <tr>

      </tr>
      
      
      
      
      
      
      
      
      <tr>
<td style="vertical-align: top;">whatsnew.pl<br>
</td>
<td style="vertical-align: top;">/site/umls/scripts<br>
</td>
<td style="vertical-align: top;">NOT USED<br>
</td>
<td style="vertical-align: top;">Updates the list of files on meow that have been updated regularly.<br>
</td></tr>
    </tbody>
  
  </table>

  <br>

  <span style="font-weight: bold;">Editing Manager<br>
  </span>&nbsp;<br>

  
  <table style="text-align: left; width: 100%;" border="1" cellpadding="2" cellspacing="2">

    <tbody>
      <tr>
        <th style="vertical-align: top; text-align: center; background-color: rgb(255, 255, 204);">Script/Process<br>
        </th>
        <th style="vertical-align: top; text-align: center; background-color: rgb(255, 255, 204);">Location<br>
        </th>
        <th style="vertical-align: top; text-align: center; background-color: rgb(255, 255, 204);">Frequency<br>
        </th>
        <th style="vertical-align: top; text-align: center; background-color: rgb(255, 255, 204);">Comments<br>
        </th>
      </tr>
      
      
      
      <tr>
        <td style="vertical-align: top;">generate_source_stats.pl<br>
        </td>
        <td style="vertical-align: top;">/site/umls/scripts<br>
        </td>
        <td style="vertical-align: top;">WEEKLY<br>
AUTO<br>
        </td>
        <td style="vertical-align: top;">Generates MID source statistics.&nbsp; Can be <a href="/cgi-oracle-meowusers/ems.pl?action=sourcestats">enabled/disabled from EMS</a>.<br>
        </td>
      </tr>
      
      
      <tr>

      </tr>
      <tr>
<td style="vertical-align: top;">mail-daily-report.pl<br>
</td><td style="vertical-align: top;">/site/umls/oracle/ems-2.1/scripts<br>
</td><td style="vertical-align: top;">DAILY<br>
AUTO<br>
</td><td style="vertical-align: top;">Mails editing report (<span style="font-weight: bold;">must be configured</span>)<br>
</td></tr>
      
      
      
      
      <tr>
<td style="vertical-align: top;">report-daemon.pl<br>
</td><td style="vertical-align: top;">/site/umls/oracle/wms-2.1/scripts<br>
</td><td style="vertical-align: top;">EVERY 5 MIN<br>
STARTUP<br>
</td><td style="vertical-align: top;">Makes reports for editors<br>
</td></tr>
      <tr>
        <td style="vertical-align: top;">Refresh AH, QA Bins<br>
        </td>
        <td style="vertical-align: top;">/site/umls/oracle/ems-2.1/scripts/batch_ah.pl,<br>
/site/umls/oracle/ems-2.1/scripts/batch_qa.pl<br>
        </td>
        <td style="vertical-align: top;">EVERY SUNDAY<br>
        </td>
        <td style="vertical-align: top;">Refreshes AH and QA bins.<br>
        </td>
      </tr>
<tr>
        <td style="vertical-align: top;">Repartitioning<br>
        </td>
        <td style="vertical-align: top;">No Script, <a href="/cgi-oracle-meowusers/ems.pl">EMS function</a><br>
        </td>
        <td style="vertical-align: top;">AS NEEDED<br>
MANUAL<br>
        </td>
        <td style="vertical-align: top;">Refresh the ME bins<br>
        </td>
      </tr>
      
      
    </tbody>
  
  </table>

  <span style="font-weight: bold;"><br>
Maintainer<br>
  </span>&nbsp;<br>

  
  <table style="text-align: left; width: 100%;" border="1" cellpadding="2" cellspacing="2">

    <tbody>
      <tr>
        <th style="vertical-align: top; text-align: center; background-color: rgb(255, 255, 204);">Script/Process<br>
        </th>
        <th style="vertical-align: top; text-align: center; background-color: rgb(255, 255, 204);">Location<br>
        </th>
        <th style="vertical-align: top; text-align: center; background-color: rgb(255, 255, 204);">Frequency<br>
        </th>
        <th style="vertical-align: top; text-align: center; background-color: rgb(255, 255, 204);">Comments<br>
        </th>
      </tr>
      <tr>
<td style="vertical-align: top;">assign_cuis.pl<br>
</td>
<td style="vertical-align: top;">$MEME_HOME/bin<br>
</td>
<td style="vertical-align: top;">DAILY, <br>
ONCE PER RELEASE<br>
      <br>
AUTO</td><td style="vertical-align: top;">Computes CUIs.&nbsp; Use of this should be discussed as MEME has a real-time CUI assignment facility.<br>
</td></tr>
      
      
      
      
      <tr>
<td style="vertical-align: top;">Map SG Data <br>
</td>
<td style="vertical-align: top;">$MEME_HOME/sql/MEME_SOURCE_PROCESSING.sql, map_sg_data proc<br>
</td>
<td style="vertical-align: top;">DAILY <br>
(called by assign CUIs)<br>
      <br>
AUTO<br>
</td>
<td style="vertical-align: top;">Remaps certain attributes and
relationships to current atom ids. Based on things like changes in
precedence or CUI assignments..<br>
</td></tr>
      <tr>

      </tr><tr>
<td style="vertical-align: top;">matrixinit.pl<br>
</td>
<td style="vertical-align: top;">$MEME_HOME/bin<br>
</td>
<td style="vertical-align: top;">DAILY<br>
AUTO<br>
</td>
<td style="vertical-align: top;">Determines which concepts require editing.<br>
</td></tr>
      
      
      
      
      
      
      
      
      
    </tbody>
  
  </table>

  <br>
  <span style="font-weight: bold;">QA Administrator<br>
  </span>&nbsp;<br>

  
  <table style="text-align: left; width: 100%;" border="1" cellpadding="2" cellspacing="2">

    <tbody>
      <tr>
        <th style="vertical-align: top; text-align: center; background-color: rgb(255, 255, 204);">Script/Process<br>
        </th>
        <th style="vertical-align: top; text-align: center; background-color: rgb(255, 255, 204);">Location<br>
        </th>
        <th style="vertical-align: top; text-align: center; background-color: rgb(255, 255, 204);">Frequency<br>
        </th>
        <th style="vertical-align: top; text-align: center; background-color: rgb(255, 255, 204);">Comments<br>
        </th>
      </tr>
      
      <tr>
<td style="vertical-align: top;">batch_qa.pl<br>
</td>
<td style="vertical-align: top;">/site/umls/oracle/ems-2.1/scripts<br>
</td>
<td style="vertical-align: top;">SUNDAYS<br>
AUTO<br>
</td>
<td style="vertical-align: top;">Refreshes QA and AH bins.<br>
</td></tr>
      <tr>
<td style="vertical-align: top;">cronvalidate.csh<br>
</td>
<td style="vertical-align: top;">$MEME_HOME/bin<br>
</td>
<td style="vertical-align: top;">SATURDAYS<br>
AUTO<br>
</td>
<td style="vertical-align: top;">Runs "MID Validation" script in its entirety<br>
</td></tr>
      
      
      
      <tr>

      </tr>
      
      
      
      
      
      
      
      
      
    </tbody>
  
  </table>

  <br>

.
.<br>
  <a name="verify" style="font-weight: bold;"></a><span style="font-weight: bold;">Verifying Required Processes<br>
  <br>
  </span>Following is a list of URLs that can be queried to determine
if certain required servers are running properly.&nbsp; Accompanying
each URL is a pattern to search for in the response to indiciate if it
is working correctly.&nbsp; At present, this is a <span style="font-style: italic;">very </span>basic test that indicates YES or NO only.<br>
  <br style="color: rgb(0, 0, 0);">


  <ol style="margin-top: 0in;" start="1" type="1">
<li>Confirm MID Services working properly<br>

     URL: <a href="/db.shtml">/db.shtml</a><br>

     Search Pattern: .*editing-db.*<br>
<br style="">

    </li><li>Confirm MID Services working properly and Oracle is running<br>

     URL: <a href="/cgi-oracle-nlmlti/oracle-sessions.pl?doit=1&amp;service=editing-db">/cgi-oracle-nlmlti/oracle-sessions.pl?doit=1&amp;service=editing-db</a><br>

     Search Pattern: .*BEGIN DBMS_OUTPUT.enable\(100000\); END;.* <br>
<br style="">

   </li><li>Confirm Apache/Tomcat link<br>

     URL: <a href="/webapps-meme/meme/controller?state=AdminClient">/webapps-meme/meme/controller?state=AdminClient</a><br>

     Search Pattern: .*MEME Server Administration.*<br>
<br style="">

    </li><li>Confirm LVG Server, MID Services and CGI is working<br>

     URL: <a href="/cgi-oracle-meowusers/concept-report-mid.pl?service=editing-db&amp;action=searchbynormstr&amp;arg=vanilla&amp;meme_server=meme-server">/cgi-oracle-meowusers/concept-report-mid.pl?service=editing-db&amp;action=searchbynormstr&amp;arg=vanilla&amp;meme_server=meme-server</a><br>

     Search Pattern: .*The following string\(s\) matched. Select the concept ID
     to see the matching concept report.*<br>
<br style="">
</li><li>Confirm MEME Server<br>

     URL: <a href="/cgi-oracle-meowusers/concept-report-mid.pl?action=searchbyconceptid&amp;arg=100&amp;service=editing-db&amp;meme_server=meme-server">/cgi-oracle-meowusers/concept-report-mid.pl?action=searchbyconceptid&amp;arg=100&amp;service=editing-db&amp;meme_server=meme-server</a><br>

     Search Pattern: .*{Test atom \[MTH\/PN\/.*\]}.*</li>

  </ol>


  <span style="font-weight: bold;"><br>
  </span>
  <span style="font-weight: bold;"><a name="config"></a>Processes that Send Email<br>
  <span style="font-weight: bold;"><br>
  </span></span>There are a number of MEME processes that send
structured emails.&nbsp; The mail server used and the sender and
recipient will need to be configured.<br>
  <table style="text-align: left; width: 100%;" border="1" cellpadding="2" cellspacing="2">
    <tbody>
      <tr>
        <th style="vertical-align: top; background-color: rgb(255, 255, 204); text-align: center;">Script/Process<br>
        </th>
        <th style="vertical-align: top; background-color: rgb(255, 255, 204); text-align: center;">Location<br>
        </th>
        <th style="vertical-align: top; background-color: rgb(255, 255, 204); text-align: center;">What to configure<br>
        </th>
      </tr>
      <tr>
        <td style="vertical-align: top;">MEME Server<br>
        </td>
        <td style="vertical-align: top;">$MEME_HOME/bin/meme.prop<br>
$MRD_HOME/bin/mrd.prop<br>
        </td>
        <td style="vertical-align: top;">The following properties
should be configured.&nbsp; The first four are the various
"administrator" emails, and the last is the mail server.&nbsp; Mail
gets sent when various kinds of errors occur.<br>
        <pre>  # The email address of the Mid Services administrator<br>  meme.admin.midsvcs=bcarlsen\@apelon.com<br>  # The email address of the MID/MRD database administrator<br>  meme.admin.database=bcarlsen\@apelon.com<br>  # The email address of the NLM system administrator<br>  meme.admin.system=bcarlsen\@apelon.com<br>  # The email address of the MEME application server administrator<br>  meme.admin.meme=bcarlsen\@apelon.com<br><br>  # The mail server used by MEMEMail<br>  meme.smtp.host=&lt;mail server here&gt;</pre>
        </td>
      </tr>
      <tr>
        <td style="vertical-align: top;">Database Request Form<br>
        </td>
        <td style="vertical-align: top;">$MEME_HOME/cgi-bin/db_request.cgi<br>
        </td>
        <td style="vertical-align: top;">These variables should be configured:<br>
        <pre>  $mail_to = "metaman\@nlm.nih.gov, nlmreg\@nlm.nih.gov" unless $mail_to;<br>  $apelon_mailto = "tkao\@apelon.com" unless $apelon_mailto;</pre>
These "mailx" calls should be configured:<br>
        <pre>  `mailx -c meme\@apelon.com -r tuttle\@nlm.nih.gov -s "Database Request ($db_name)." $mail_to &lt; $request_dir/$date_Ymd.$db_name.txt`;<br>  `mailx -c meme\@apelon.com -r tuttle\@nlm.nih.gov -s "Status of Database Work ($db_name)." $mail_to &lt; /tmp/response.$$.txt`;<br>  `mailx -r tuttle\@nlm.nih.gov -s "Status of Database Work ($db_name)." $apelon_mailto &lt; /tmp/response.$$.txt`;		</pre>
        </td>
      </tr>
      <tr>
        <td style="vertical-align: top;">Software Release Notices<br>
        </td>
        <td style="vertical-align: top;">$MEME_HOME/bin/release.pl<br>
        </td>
        <td style="vertical-align: top;">Configure these variables:<br>
        <pre>  $smtp_host = "mail.apelon.com";<br>  $from = "meme\@apelon.com";<br>  $to = "volenichev\@nlm.nih.gov, nlmreg\@nlm.nih.gov, meme\@apelon.com";</pre>
        </td>
      </tr>
      <tr>
        <td style="vertical-align: top;">testmeme4.pl<br>
        </td>
        <td style="vertical-align: top;">/site/umls/scripts/testmeme4.pl<br>
        </td>
        <td style="vertical-align: top;">Configure these variables:<br>
        <pre>  $sender = "meme\@apelon.com"<br>  $recipient = "meme\@apelon.com";</pre>
        </td>
      </tr>
      <tr>
        <td style="vertical-align: top;">mail-daily-report.pl<br>
        </td>
        <td style="vertical-align: top;">/site/umls/oracle/ems-2.1/scripts/mail-daily-report.pl<br>
        </td>
        <td style="vertical-align: top;">Specified by -r switch</td>
      </tr>
      <tr>
        <td style="vertical-align: top;">report-daemon.pl<br>
        </td>
        <td style="vertical-align: top;">/site/umls/oracle/wms-2.1/scripts/report-daemon.pl<br>
        </td>
        <td style="vertical-align: top;">Configured in control document<br>
        </td>
      </tr>
      <tr>
        <td style="vertical-align: top;">SOS Response Form<br>
        </td>
        <td style="vertical-align: top;">$MEME_HOME/bin/sos.cgi<br>
        </td>
        <td style="vertical-align: top;">Configure default "mail to":<br>
        <pre>  $mail_to = "sos\@nlm.nih.gov, sos\@apelon.com" unless $mail_to;</pre>
Configure this "mailx" call:<br>
        <pre>&nbsp; `mailx -c sos\@apelon.com -r tuttle\@nlm.nih.gov -s "RE: $subject" $mail_to &lt; sos.txt`;</pre>
        </td>
      </tr>
    </tbody>
  </table>
  <br>
  
<h3><a name="references"></a> References/Links</h3>
  <p>Use the following references for more information.
  </p><ul><li><a href="/MEME/INSTALL.html">MEME Installation Document</a> <br>
    </li></ul>
  
</blockquote>









<div align="center">&nbsp;<br>
[ <a href="#overview">overview</a> | <a href="#details">details</a> | <a href="#references">references</a> ]<br>
&nbsp;<br>
</div>









<hr width="100%">
<div align="center"><br></div>












   
      
   
<table nosave="" border="0" cols="2" width="100%">







<tbody><tr nosave=""><td nosave="" align="left" valign="top">
      <address> <a href="/MEME">MEME HOME</a></address>
   </td>
    <td nosave="" align="right" valign="top">
      <address> <font size="-1">Contact:
  <a href="mailto:bcarlsen@apelon.com">Brian A. Carlsen</a></font></address>

      <address> <font size="-1">Created: 04/18/2005</font></address>

      <address> <font size="-1">Last Updated: 12/08/2005</font></address></td></tr></tbody>
</table>

<!-- These comments are used by the What's new Generator --><!-- Changed On: 2005/12/08 --><!-- Changed by: Brian Carlsen --><!-- Change Note: MEME - Application Documentation - Regular processes--><!-- Fresh for: 1 month -->










</body></html>