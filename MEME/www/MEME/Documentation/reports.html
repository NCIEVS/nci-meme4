<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=utf8">
   <title>MEME4 Applications - Generating Concept Reports</title>
</head>
<body text="#000000" bgcolor="#FFFFFF" link="#3333FF" vlink="#999999" alink="#FF0000">

<center>
<h3>
<font size=+0>Generating Concept Reports</font></h3></center>

<hr><i>Following is a description of how to generate concept reports.</i>
<br>&nbsp;
<center><table CELLPADDING=3 WIDTH="90%" NOSAVE >
<tr NOSAVE>
<td VALIGN=TOP NOSAVE><b>Using the Perl Client</b></td>

<td VALIGN=TOP NOSAVE><font size=-1>All <i>MEME4</i> applications employ
a client/server model and so a variety of different clients can be used
to access a service provided by the <i>MEME Application Server</i>.&nbsp;
In this case, concept reports can be generated by using a Perl client that
connects to the server and requests concept reports.</font>
<pre><font size=-1>% reports.pl -help
&nbsp;This script has the following usage:
&nbsp;&nbsp;&nbsp; reports.pl [-r(0|1|2|3)] [-x(0|1|2|3)] [-f] [-host=(host)] [-port=(port)]
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;name/concept_id/cui> [&lt;mid service>]


&nbsp;Options:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -r(0|1|2|3): Set relationship display option
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0 (NONE) - Don't show any relationships
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 (DEFAULT) - Show winning relationships
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2 (XR) - Show winning, XR, and corresponding relationships
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3 (ALL) - Show all relationships
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -x(0|1|2|3): Set context relationship display option
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0 (NONE) - Don't show any context relationships
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 (DEFAULT) - Show PAR, CHD if no contexts or relationships
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2 (SIB) - Same as 1, but include SIBs
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3 (ALL) - Show all context relationships
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -f&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Treat first argument as a file name containing concept ids
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Generate reports for each concept id
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -cui&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Treat ids as CUIs instead of concept_ids
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -host=(host) Machine where the application server is running,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Default is localhost
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -port=(port) Port on which server is listening, default is 8080
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -v[ersion]:Print version information.
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -[-]help:&nbsp; On-line help</font></pre>
<font size=-1>The format of the call to <tt>reports.pl</tt> was preserved
from the <i>MEME3</i> format, so that transitioning to its use would be
easy.&nbsp; As before, a report can be generated for a concept by calling
the script and passing a <tt>concept_id</tt>.&nbsp; Unlike before, a database
name does not have to be passed in the call.&nbsp; The simplest form is
this,</font>
<pre><font size=-1>% reports.pl 12345</font></pre>
<font size=-1>Which would generate a concept report for concept 12345 against
the default mid service that the server is using (typically <tt>editing-db</tt>).&nbsp;&nbsp;
If you want to generate a concept report against a non default mid service,
you can simply provide it,</font>
<pre><font size=-1>% reports.pl 12345 testsw-db</font></pre>
<font size=-1>Now, either of these two forms will work if the application
server is actually running on the machine that you run <tt>reports.pl</tt>
from.&nbsp;&nbsp; However, if the server is on a remote machine, reports
can still be generated by using the <tt>-host</tt> flag, as in,</font>
<pre><font size=-1>smis% reports.pl -host oa 12345</font></pre>
<font size=-1>This call would generate a concept report for concept 12345
against the default mid service for the <i>MEME Application Server</i>
running on <tt>oa</tt>.&nbsp; This call assumes that the server is listening
on port 8080.&nbsp; If it turns out that the server is not only remote,
but listening on a port other than 8080, you will need to specify both
pieces of information, for example,</font>
<pre><font size=-1>smis% reports.pl -host oa -port 8081 12345 testsrc-db</font></pre>
<font size=-1>This call would generate a concept report for concept 12345
against the <tt>testsrc-db</tt> mid service for the server running on <tt>oa</tt>
and listening on port 8081.&nbsp;&nbsp;&nbsp; Now, in addition to being
able to produce reports for concept ids, you can produce reports for CUIs
by passing the <tt>-cui</tt> switch.&nbsp; For example,</font>
<pre><font size=-1>% reports.pl -cui C0000039</font></pre>
<font size=-1>This call would generate a report for the concept whose cui
assignment in <tt>concept_status</tt> is <tt>C0000039</tt>. There is one
final option when calling this script and it involves passing the name
of a file that contains <tt>concept_id</tt>s (one per line).&nbsp; For
example,</font>
<pre><font size=-1>% reports.pl -f file_of_ids</font></pre>
<font size=-1>This call will generate a series of concept reports (separated
by a line) for each <tt>concept_id</tt> that appears in the file called
<tt>file_of_ids</tt>.&nbsp;
The <tt>-f</tt> switch can be used in combination with <tt>-cui</tt> to
create a batch report for a file containing CUI values instead of concept
ids. The old <i>MEME</i> reports would support generating reports from
a table of ids but that functionality is not currently available.</font>
<p><font size=-1>There are four common types of errors that may occur when
processing a reports request.</font>
<ul>
<li>
<font size=-1>The server could not be running at the host/port specified,
in which you will get a message clearly indicating that.</font></li>

<li>
<font size=-1>The <tt>concept_id</tt> or <tt>cui</tt> supplied may not
be valid, in which case an error message will be reported.</font></li>

<li>
<font size=-1>The mid service supplied may not be valid, in which case
an error message will be reported with an exit code of 255.</font></li>

<li>
<font size=-1>The file name supplied may not be valid, in which case an
error message will be reported with an exit code of 255.</font></li>
</ul>
</td>
</tr>

<tr NOSAVE>
<td VALIGN=TOP NOSAVE><b>Using the Java Client</b></td>

<td VALIGN=TOP NOSAVE><font size=-1>In addition to the <tt>reports.pl</tt>
client, there is a Java client that can be used to generate concept reports.&nbsp;
For instructions on how to use it and more information see the <a href="javadoc/gov/nih/nlm/meme/client/ReportsClient.html">javadoc
page</a>.&nbsp; Following is sample code for a <tt>TestReports</tt> class
that uses the java client.</font>
<pre><font size=-1>import gov.nih.nlm.meme.client.ReportsClient;
import gov.nih.nlm.meme.MEMEToolkit;
import gov.nih.nlm.meme.client.MEMEClientConstants;

public class TestReports {

&nbsp; /**
&nbsp;&nbsp; * This client generates a concept report
&nbsp;&nbsp; * against the current-editing database for for argv[0],
&nbsp;&nbsp; * which can be either a cui or a concept_id
&nbsp;&nbsp; *
&nbsp;&nbsp; * It should be called like this,
&nbsp;&nbsp; *
&nbsp;&nbsp; * <b>% java -Dmeme.properties.file=$MEME_HOME/bin/meme.prop TestReports &lt;concept_id/cui>
&nbsp;&nbsp; *
</b>&nbsp;&nbsp; * or like this
&nbsp;&nbsp; *
&nbsp;&nbsp; * <b>% $MEME_HOME/bin/memerun.pl TestReports &lt;concept_id/cui>
&nbsp;&nbsp; *
</b>&nbsp;&nbsp; */
&nbsp; public static void main (String[] argv) {

&nbsp;&nbsp;&nbsp; if (argv.length==0) {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.out.println("Usage: TestReports &lt;concept_id/CUI>");
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.exit(0);
&nbsp;&nbsp;&nbsp; }

&nbsp;&nbsp;&nbsp; // Get reports client instance
&nbsp;&nbsp;&nbsp; ReportsClient reports = null;
&nbsp;&nbsp;&nbsp; try {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; reports = new ReportsClient();
&nbsp;&nbsp;&nbsp; } catch (Exception e) {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.out.println("Error creating reports client.");
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.out.println(e.getMessage());
&nbsp;&nbsp;&nbsp; };

&nbsp;&nbsp;&nbsp; // Try using argv[0] as a concept_id
&nbsp;&nbsp;&nbsp; int concept_id =0;
&nbsp;&nbsp;&nbsp; try {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; concept_id = Integer.valueOf(argv[0]).intValue();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.out.println(reports.getReport(concept_id));
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return;
&nbsp;&nbsp;&nbsp; } catch (NumberFormatException e) {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // do nothing
&nbsp;&nbsp;&nbsp; } catch (Exception e) {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // report failed
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.out.println("Error getting report for "+concept_id);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.out.println(e.getMessage());
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.exit(1);
&nbsp;&nbsp;&nbsp; }

&nbsp;&nbsp;&nbsp; // Try using argv[0] as a concept_id
&nbsp;&nbsp;&nbsp; String cui = null;
&nbsp;&nbsp;&nbsp; try {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cui = argv[0];
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.out.println(reports.getReport(cui));
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return;
&nbsp;&nbsp;&nbsp; } catch (Exception e) {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // report failed
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.out.println("Error getting report for "+cui);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.out.println(e.getMessage());
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.exit(1);
&nbsp;&nbsp;&nbsp; }

&nbsp; }

}</font></pre>
<font size=-1>This code can also be downloaded by <a href="/MEME/Documentation/TestReports.java.txt">clicking
here</a>.&nbsp; Add the <tt>$MEME_HOME/java/*jar</tt> files to your classpath
and compile the code in a file called <tt>TestReports.java.txt</tt> and then
run it like this</font>
<pre><font size=-1>% $MEME_HOME/bin/memerun.pl TestReports &lt;concept_id/cui></font></pre>
</td>
</tr>

<tr>
<td></td>

<td></td>
</tr>
</table></center>

<p>
<hr WIDTH="100%">
<table BORDER=0 COLS=2 WIDTH="100%" NOSAVE >
<tr NOSAVE>
<td ALIGN=LEFT VALIGN=TOP NOSAVE>
<address>
<a href="/MEME/">MEME Home</a></address>
</td>

<td ALIGN=RIGHT VALIGN=TOP NOSAVE>
<address>
<font size=-1>Contact: <a href="mailto:bcarlsen@apelon.com">Brian Carlsen</a></font></address>

<address>
<font size=-1>Created: 8/22/2000</font></address>

<address>
<font size=-1>Last Updated: 02/01/2002</font></address>
</td>
</tr>
</table>

</body>
<!-- These comments are used by the What's new Generator -->
<!-- Changed On: 2002/02/01 -->
<!-- Changed by: BAC -->
<!-- Change Note: MEME4 Applications - Generating Reports. -->
<!-- Fresh for: 1 month -->
</html>
